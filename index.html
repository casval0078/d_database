<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>動画サムネイルグリッド</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 10px;
        }
        .grid-item {
            width: 200px;
            height: 150px;
            background-color: #cccccc;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #999;
            position: relative;
        }
        .grid-item video {
            display: none;
        }
        .grid-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <div class="grid-container">
        <div class="grid-item" data-video-url="https://firebasestorage.googleapis.com/v0/b/hozon-4794d.appspot.com/o/FC2-PPV-2885137%20%E7%8F%BE%E5%BD%B9%E3%81%AE%E9%AB%98%E2%97%8B3%E2%97%8B%E7%94%9F%E3%81%A7%E3%81%99%E3%80%82%20%E9%83%A8%E6%B4%BB%E7%B5%82%E3%82%8F%E3%81%A3%E3%81%9F%E3%81%82%E3%81%A8%E5%88%9D%E3%82%81%E3%81%A6%E3%82%AA%E3%83%8A%E3%83%8B%E3%83%BC%E3%82%92%E6%92%AE%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%BE%E3%81%97%E3%81%9F_1.mp4?alt=media&token=c3d99cd6-afe8-4fb3-8339-e8094eaa52e7" id="item1">
            <img src="" alt="Video 1">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item2">
            <img src="" alt="Video 2">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item3">
            <img src="" alt="Video 3">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item4">
            <img src="" alt="Video 4">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item5">
            <img src="" alt="Video 5">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item6">
            <img src="" alt="Video 6">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item7">
            <img src="" alt="Video 7">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item8">
            <img src="" alt="Video 8">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item9">
            <img src="" alt="Video 9">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item10">
            <img src="" alt="Video 10">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item11">
            <img src="" alt="Video 11">
        </div>
        <div class="grid-item" data-video-url="https://www.w3schools.com/html/mov_bbb.mp4" id="item12">
            <img src="" alt="Video 12">
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gridItems = document.querySelectorAll('.grid-item');

            gridItems.forEach(item => {
                const videoUrl = item.getAttribute('data-video-url');
                const video = document.createElement('video');
                video.src = videoUrl;
                video.crossOrigin = "anonymous"; // If the video is from a different origin

                video.addEventListener('loadeddata', () => {
                    // Wait for the video to load enough to capture a frame
                    video.currentTime = 2; // Set to 2 seconds or whatever frame you want to capture
                });

                video.addEventListener('seeked', () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                    const img = item.querySelector('img');
                    img.src = canvas.toDataURL();
                    video.remove(); // Clean up the video element
                });

                item.appendChild(video);

                item.addEventListener('click', () => {
                    const newVideo = document.createElement('video');
                    newVideo.src = videoUrl;
                    newVideo.controls = true;
                    newVideo.autoplay = true;

                    // Remove existing content (thumbnail)
                    item.innerHTML = '';
                    // Add video element
                    item.appendChild(newVideo);
                });
            });
        });
    </script>
</body>
</html>
